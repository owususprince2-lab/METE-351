<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>METE 151 Quiz</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <div id="root"></div>
    
    <script type="text/babel">
      const { useState, useEffect } = React;
      
      // Lucide React icons as inline SVG components
      const AlertCircle = ({ className }) => (
        <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <circle cx="12" cy="12" r="10" />
          <line x1="12" y1="8" x2="12" y2="12" />
          <line x1="12" y1="16" x2="12.01" y2="16" />
        </svg>
      );
      
      const Lock = ({ className }) => (
        <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
          <path d="M7 11V7a5 5 0 0 1 10 0v4" />
        </svg>
      );
      
      const CheckCircle = ({ className }) => (
        <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
          <polyline points="22 4 12 14.01 9 11.01" />
        </svg>
      );
      
      const Timer = ({ className }) => (
        <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <circle cx="12" cy="12" r="10" />
          <polyline points="12 6 12 12 16 14" />
        </svg>
      );

      const QuizApp = () => {
        const [view, setView] = useState("start");
        const [studentName, setStudentName] = useState("");
        const [indexNumber, setIndexNumber] = useState("");
        const [currentQuestion, setCurrentQuestion] = useState(0);
        const [answers, setAnswers] = useState({});
        const [questionTimeLeft, setQuestionTimeLeft] = useState(20);
        const [tabSwitches, setTabSwitches] = useState(0);
        const [quizSubmitted, setQuizSubmitted] = useState(false);
        const [adminPassword, setAdminPassword] = useState("");
        const [showAdminLogin, setShowAdminLogin] = useState(false);

        const questions = [
          {
            id: 11,
            type: "mcq",
            question: "Metallurgy combines principles from which three scientific fields to improve metal properties?",
            options: [
              "Biology, Geology, and Physics",
              "Chemistry, Physics, and Materials Science",
              "Engineering, Math, and History",
              "Economics, Sociology, and Chemistry",
            ],
            correctAnswer: "Chemistry, Physics, and Materials Science",
          },
          {
            id: 12,
            type: "mcq",
            question: "Why was the discovery of Bronze a significant technological advancement?",
            options: [
              "It was easier to find than copper.",
              "It allowed for stronger tools and weapons compared to pure copper.",
              "It was used primarily for currency rather than tools.",
              "It prevented the need for heat during the shaping process.",
            ],
            correctAnswer: "It allowed for stronger tools and weapons compared to pure copper.",
          },
          {
            id: 13,
            type: "mcq",
            question: "Which extractive process specifically involves the use of fire to reduce ore into metal?",
            options: [
              "Hydrometallurgy",
              "Electrometallurgy",
              "Mineral Processing",
              "Pyrometallurgy",
            ],
            correctAnswer: "Pyrometallurgy",
          },
          {
            id: 14,
            type: "mcq",
            question: 'In traditional Ghanaian metallurgy, "Lost-wax casting" was used to create:',
            options: [
              "Large scale industrial pipes",
              "Intricate gold jewelry and bronze figurines",
              "Wrought iron bridges",
              "Reinforced steel bars",
            ],
            correctAnswer: "Intricate gold jewelry and bronze figurines",
          },
          {
            id: 15,
            type: "mcq",
            question: "The primary purpose of using superalloys in the aerospace industry is to:",
            options: [
              "Reduce the weight of the aircraft frame.",
              "Enhance engine performance and heat resistance.",
              "Provide better electrical conductivity.",
              "Lower the cost of manufacturing.",
            ],
            correctAnswer: "Enhance engine performance and heat resistance.",
          },
          {
            id: 31,
            type: "mcq",
            question: 'Compare the impact of the "Chalcolithic" and "Bronze Age" on ancient civilizations. The most significant difference was:',
            options: [
              "The Chalcolithic used only iron, while the Bronze Age used only gold.",
              "The Bronze Age introduced alloys, which revolutionized societal structures and warfare.",
              "The Chalcolithic era required higher temperatures than the Bronze Age.",
              "The Bronze Age relied entirely on cold hammering native metals.",
            ],
            correctAnswer: "The Bronze Age introduced alloys, which revolutionized societal structures and warfare.",
          },
          {
            id: 32,
            type: "mcq",
            question: 'Evaluate the role of "Galamsey" in the context of Ghanaian metallurgy. How do metallurgists help address this challenge?',
            options: [
              "By increasing the mining of gold.",
              "By developing sustainable mining practices and improving water management systems.",
              "By banning the use of all metals in local communities.",
              "By promoting the use of ancient primitive smelting techniques.",
            ],
            correctAnswer: "By developing sustainable mining practices and improving water management systems.",
          },
          {
            id: 33,
            type: "mcq",
            question: 'Synthesizing the role of metallurgy in modern technology, which statement best describes its role in "Renewable Energy"?',
            options: [
              "It is only used to build the frames of solar panels.",
              "It provides advanced materials essential for turbines and conductive elements.",
              "It is largely irrelevant as renewable energy uses non-metallic materials.",
              "It is used to extract fossil fuels more efficiently.",
            ],
            correctAnswer: "It provides advanced materials essential for turbines and conductive elements.",
          },
          {
            id: 34,
            type: "mcq",
            question: 'How did the "Colonial Era" change the trajectory of metallurgy in Ghana compared to the "Pre-Colonial Era"?',
            options: [
              "It introduced primitive methods of gold mining.",
              "It established large-scale, modern mining and metallurgical techniques.",
              "It led to the decline of gold mining in favor of agriculture.",
              "It returned the region to Stone Age technologies.",
            ],
            correctAnswer: "It established large-scale, modern mining and metallurgical techniques.",
          },
          {
            id: 35,
            type: "mcq",
            question: 'Based on the sources, what is the most likely reason "Wootz steel" was historically significant?',
            options: [
              "It was the first form of native iron found.",
              "It represented early steel production through carburization processes.",
              "It was used solely for Kente weights.",
              "It could only be shaped using cold hammering.",
            ],
            correctAnswer: "It represented early steel production through carburization processes.",
          },
          {
            id: 36,
            type: "mcq",
            question: 'Analyze the relationship between "Physical Metallurgy" and "Aerospace Engineering."',
            options: [
              "Physical metallurgy is not used in aerospace.",
              "Aerospace requires an understanding of metal properties (Physical Metallurgy) to create superalloys.",
              "Aerospace only uses extractive metallurgy to get metals.",
              "Aerospace focuses on the chemistry of ores rather than the performance of the final metal.",
            ],
            correctAnswer: "Aerospace requires an understanding of metal properties (Physical Metallurgy) to create superalloys.",
          },
          {
            id: 37,
            type: "mcq",
            question: "Assess the impact of privatization in the 1980s and 90s on Ghana's mining industry.",
            options: [
              "It led to the closure of all state-owned mines.",
              "It attracted foreign investment and led to the establishment of new mines.",
              "It halted the production of bauxite and manganese.",
              "It forced the industry to return to lost-wax casting methods.",
            ],
            correctAnswer: "It attracted foreign investment and led to the establishment of new mines.",
          },
          {
            id: 38,
            type: "mcq",
            question: "Which of the following describes the synthesis of chemistry and physics in the field of Metallurgy?",
            options: [
              "Using biology to study the age of artifacts.",
              "Understanding how atomic structures and chemical reactions influence metal production and performance.",
              "Focusing purely on the economic value of metal exports.",
              "Studying only the historical dates of the Iron Age.",
            ],
            correctAnswer: "Understanding how atomic structures and chemical reactions influence metal production and performance.",
          },
          {
            id: 39,
            type: "mcq",
            question: 'How did the discovery of "smelting" change human history during the Stone-to-Copper transition?',
            options: [
              "It allowed humans to find gold for the first time.",
              "It enabled the extraction of metal from ore using heat, moving beyond native metal usage.",
              "It decreased the need for fire in industrial processes.",
              "It made tools softer and more decorative.",
            ],
            correctAnswer: "It enabled the extraction of metal from ore using heat, moving beyond native metal usage.",
          },
          {
            id: 40,
            type: "mcq",
            question: "Evaluate the scope of Metallurgical Engineering. It is best described as:",
            options: [
              "The trade of minerals and jewelry.",
              "A science that drives innovation across aerospace, automotive, energy, and healthcare.",
              "A purely historical field focused on Stone Age tools.",
              "The study of non-metallic materials like plastics and wood.",
            ],
            correctAnswer: "A science that drives innovation across aerospace, automotive, energy, and healthcare.",
          },
        ];

        const ADMIN_PASSWORD = "admin123";
        const TIME_PER_QUESTION = 22;
        const TAB_SWITCH_PENALTY = 0.5;

        useEffect(() => {
          if (view === "quiz") {
            const handleContextMenu = (e) => e.preventDefault();
            document.addEventListener("contextmenu", handleContextMenu);

            document.body.style.userSelect = "none";
            document.body.style.webkitUserSelect = "none";

            const handleVisibilityChange = () => {
              if (document.hidden) {
                setTabSwitches((prev) => prev + 1);
              }
            };
            document.addEventListener("visibilitychange", handleVisibilityChange);

            const handleCopy = (e) => e.preventDefault();
            document.addEventListener("copy", handleCopy);
            document.addEventListener("cut", handleCopy);
            document.addEventListener("paste", handleCopy);

            return () => {
              document.removeEventListener("contextmenu", handleContextMenu);
              document.removeEventListener(
                "visibilitychange",
                handleVisibilityChange
              );
              document.removeEventListener("copy", handleCopy);
              document.removeEventListener("cut", handleCopy);
              document.removeEventListener("paste", handleCopy);
              document.body.style.userSelect = "auto";
              document.body.style.webkitUserSelect = "auto";
            };
          }
        }, [view]);

        useEffect(() => {
          if (view === "quiz" && questionTimeLeft > 0) {
            const timer = setTimeout(() => {
              setQuestionTimeLeft((prev) => prev - 1);
            }, 1000);
            return () => clearTimeout(timer);
          } else if (view === "quiz" && questionTimeLeft === 0) {
            handleAutoNext();
          }
        }, [view, questionTimeLeft]);

        const handleAutoNext = () => {
          if (currentQuestion < questions.length - 1) {
            setCurrentQuestion((prev) => prev + 1);
            setQuestionTimeLeft(TIME_PER_QUESTION);
          } else {
            handleSubmitQuiz();
          }
        };

        const handleStartQuiz = async () => {
          if (!studentName.trim() || !indexNumber.trim()) {
            alert("Please enter your name and index number");
            return;
          }

          const startButton = document.querySelector("button");
          if (startButton) startButton.disabled = true;

          try {
            const GOOGLE_SCRIPT_URL =
              "https://script.google.com/macros/s/AKfycbzQ49ebOvpIuttMBXh7gkCRU857mK6T0Hr3v4yiEisPzHjwHdaPFyD744kWGVu81KymqA/exec";

            const response = await fetch(GOOGLE_SCRIPT_URL);
            const data = await response.json();

            const alreadyTaken = data.some((record) => {
              const recordIndex = String(record.indexNumber).trim();
              const inputIndex = String(indexNumber).trim();
              return recordIndex === inputIndex;
            });

            if (alreadyTaken) {
              alert(
                "This index number has already been used to take the quiz. You cannot take the quiz again."
              );
              if (startButton) startButton.disabled = false;
              return;
            }

            setView("quiz");
            setQuestionTimeLeft(TIME_PER_QUESTION);
          } catch (error) {
            console.error("Error checking index number:", error);
            alert(
              "Error checking records. Please try again or contact your instructor."
            );
            if (startButton) startButton.disabled = false;
          }
        };

        const handleAnswerChange = (questionId, answer) => {
          setAnswers((prev) => ({
            ...prev,
            [questionId]: answer,
          }));
        };

        const calculateScore = () => {
          let correct = 0;
          questions.forEach((q) => {
            const studentAnswer = answers[q.id];
            if (studentAnswer === q.correctAnswer) {
              correct++;
            }
          });

          const tabPenalty = tabSwitches * TAB_SWITCH_PENALTY;
          const finalScore = Math.max(0, correct - tabPenalty);

          return {
            rawScore: correct,
            tabPenalty,
            finalScore,
          };
        };

        const handleSubmitQuiz = async () => {
          if (quizSubmitted) return;

          const { rawScore, tabPenalty, finalScore } = calculateScore();
          const totalQuestions = questions.length;
          const percentage = ((finalScore / totalQuestions) * 100).toFixed(1);

          const result = {
            studentName,
            indexNumber,
            program: "Metallurgical Engineering",
            rawScore,
            tabSwitches,
            tabPenalty,
            finalScore,
            totalQuestions,
            percentage,
            timestamp: new Date().toLocaleString(),
          };

          setQuizSubmitted(true);

          try {
            const GOOGLE_SCRIPT_URL =
              "https://script.google.com/macros/s/AKfycbzQ49ebOvpIuttMBXh7gkCRU857mK6T0Hr3v4yiEisPzHjwHdaPFyD744kWGVu81KymqA/exec";

            await fetch(GOOGLE_SCRIPT_URL, {
              method: "POST",
              mode: "no-cors",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(result),
            });

            console.log("Results submitted successfully");
          } catch (error) {
            console.error("Error submitting results:", error);
          }

          setView("thankyou");
        };

        const handleAdminLogin = () => {
          if (adminPassword === ADMIN_PASSWORD) {
            setView("admin");
          } else {
            alert("Incorrect password");
          }
        };

        const AdminView = () => {
          const [results, setResults] = useState([]);
          const [loading, setLoading] = useState(true);

          useEffect(() => {
            loadResultsFromSheets();
          }, []);

          const loadResultsFromSheets = async () => {
            try {
              const GOOGLE_SCRIPT_URL =
                "https://script.google.com/macros/s/AKfycbzQ49ebOvpIuttMBXh7gkCRU857mK6T0Hr3v4yiEisPzHjwHdaPFyD744kWGVu81KymqA/exec";

              const response = await fetch(GOOGLE_SCRIPT_URL);
              const data = await response.json();

              setResults(data);
              setLoading(false);
            } catch (error) {
              console.error("Error loading results:", error);
              setLoading(false);
            }
          };

          const calculateStats = () => {
            if (results.length === 0)
              return { highest: 0, average: 0, lowest: 0 };

            const scores = results.map((r) => {
              const scoreStr = r.finalScore.toString();
              const numericScore = parseFloat(scoreStr.split("/")[0]);
              return numericScore;
            });

            const highest = Math.max(...scores);
            const lowest = Math.min(...scores);
            const average = (
              scores.reduce((a, b) => a + b, 0) / scores.length
            ).toFixed(1);

            return { highest, lowest, average };
          };

          const stats = calculateStats();

          return (
            <div className="min-h-screen bg-gray-50 p-6">
              <div className="max-w-7xl mx-auto">
                <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                  <div className="flex justify-between items-center mb-4">
                    <h2 className="text-2xl font-bold">
                      Admin Dashboard - METE 151 Quiz
                    </h2>
                    <div className="flex gap-2">
                      <button
                        onClick={() => loadResultsFromSheets()}
                        className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
                      >
                        Refresh
                      </button>
                      <button
                        onClick={() => setView("start")}
                        className="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"
                      >
                        Exit Admin
                      </button>
                    </div>
                  </div>

                  {loading ? (
                    <p>Loading results from Google Sheets...</p>
                  ) : results.length === 0 ? (
                    <p className="text-gray-500">No quiz submissions yet.</p>
                  ) : (
                    <>
                      <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div className="bg-blue-50 rounded-lg p-4">
                          <p className="text-sm text-blue-600 font-semibold mb-1">
                            Total Submissions
                          </p>
                          <p className="text-3xl font-bold text-blue-700">
                            {results.length}
                          </p>
                        </div>
                        <div className="bg-green-50 rounded-lg p-4">
                          <p className="text-sm text-green-600 font-semibold mb-1">
                            Highest Score
                          </p>
                          <p className="text-3xl font-bold text-green-700">
                            {stats.highest}/15
                          </p>
                        </div>
                        <div className="bg-yellow-50 rounded-lg p-4">
                          <p className="text-sm text-yellow-600 font-semibold mb-1">
                            Average Score
                          </p>
                          <p className="text-3xl font-bold text-yellow-700">
                            {stats.average}/15
                          </p>
                        </div>
                        <div className="bg-red-50 rounded-lg p-4">
                          <p className="text-sm text-red-600 font-semibold mb-1">
                            Lowest Score
                          </p>
                          <p className="text-3xl font-bold text-red-700">
                            {stats.lowest}/15
                          </p>
                        </div>
                      </div>

                      <div className="mb-4">
                        <p className="text-xs text-gray-500">
                          Data synced with Google Sheets | Each tab switch = -0.5
                          points penalty
                        </p>
                      </div>

                      <div className="overflow-x-auto">
                        <table className="min-w-full divide-y divide-gray-200">
                          <thead className="bg-gray-50">
                            <tr>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                #
                              </th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                Name
                              </th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                Index Number
                              </th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                Raw Score
                              </th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                Tab Switches
                              </th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                Penalty
                              </th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                Final Score
                              </th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                Percentage
                              </th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                Timestamp
                              </th>
                            </tr>
                          </thead>
                          <tbody className="bg-white divide-y divide-gray-200">
                            {results.map((result, idx) => (
                              <tr key={idx}>
                                <td className="px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-600">
                                  {idx + 1}
                                </td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm">
                                  {result.studentName}
                                </td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm">
                                  {result.indexNumber}
                                </td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm font-semibold">
                                  {result.rawScore}
                                </td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm">
                                  {result.tabSwitches}
                                </td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm text-red-600">
                                  {result.tabPenalty}
                                </td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm">
                                  <span className="font-bold text-indigo-600">
                                    {result.finalScore}
                                  </span>
                                </td>
                                <td className="px-4 py-4 whitespace-nowrap">
                                  <span className="px-2 py-1 rounded text-sm font-semibold bg-gray-100 text-gray-800">
                                    {result.percentage}
                                  </span>
                                </td>
                                <td className="px-4 py-4 whitespace-nowrap text-xs text-gray-500">
                                  {result.timestamp}
                                </td>
                              </tr>
                            ))}
                          </tbody>
                        </table>
                      </div>
                    </>
                  )}
                </div>

                <div className="text-center mt-6">
                  <p className="text-sm text-gray-500">©Team Benny</p>
                </div>
              </div>
            </div>
          );
        };

        if (view === "admin") {
          return <AdminView />;
        }

        if (view === "start") {
          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
              <div className="max-w-md w-full">
                <div className="bg-white rounded-lg shadow-xl p-8">
                  <div className="text-center mb-6">
                    <Lock className="mx-auto h-12 w-12 text-indigo-600 mb-3" />
                    <h1 className="text-3xl font-bold text-gray-800 mb-2">
                      METE 151 Quiz
                    </h1>
                    <p className="text-gray-600">Metallurgical Engineering</p>
                  </div>

                  <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                    <div className="flex">
                      <AlertCircle className="h-5 w-5 text-yellow-400 mr-2 flex-shrink-0" />
                      <div className="text-sm text-yellow-700">
                        <p className="font-semibold mb-1">Quiz Rules:</p>
                        <ul className="list-disc list-inside space-y-1">
                          <li>15 questions total</li>
                          <li>20 seconds per question</li>
                          <li>Auto-advances when time expires</li>
                          <li>Tab switching: -0.5 points each</li>
                          <li>Text selection disabled</li>
                          <li>Right-click disabled</li>
                        </ul>
                      </div>
                    </div>
                  </div>

                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Full Name
                      </label>
                      <input
                        type="text"
                        value={studentName}
                        onChange={(e) => setStudentName(e.target.value)}
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                        placeholder="Enter your full name"
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Index Number
                      </label>
                      <input
                        type="text"
                        value={indexNumber}
                        onChange={(e) => setIndexNumber(e.target.value)}
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                        placeholder="Enter your index number"
                      />
                    </div>

                    <button
                      onClick={handleStartQuiz}
                      className="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition duration-200"
                    >
                      Start Quiz
                    </button>

                    <button
                      onClick={() => setShowAdminLogin(!showAdminLogin)}
                      className="w-full text-sm text-gray-500 hover:text-gray-700 mt-4"
                    >
                      {showAdminLogin ? "Hide Admin Login" : "Admin Login"}
                    </button>

                    {showAdminLogin && (
                      <div className="mt-4 p-4 bg-gray-50 rounded-lg">
                        <input
                          type="password"
                          value={adminPassword}
                          onChange={(e) => setAdminPassword(e.target.value)}
                          placeholder="Admin Password"
                          className="w-full px-4 py-2 border border-gray-300 rounded-lg mb-2"
                        />
                        <button
                          onClick={handleAdminLogin}
                          className="w-full bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-700"
                        >
                          Login as Admin
                        </button>
                      </div>
                    )}
                  </div>
                </div>

                <div className="text-center mt-6">
                  <p className="text-sm text-gray-400">©Team Benny</p>
                </div>
              </div>
            </div>
          );
        }

        if (view === "thankyou") {
          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
              <div className="max-w-md w-full">
                <div className="bg-white rounded-lg shadow-xl p-8">
                  <div className="text-center">
                    <CheckCircle className="mx-auto h-16 w-16 text-green-500 mb-4" />
                    <h2 className="text-3xl font-bold text-gray-800 mb-2">
                      Quiz Submitted Successfully!
                    </h2>
                    <p className="text-gray-600 mb-6">Thank you, {studentName}</p>
                    <div className="bg-blue-50 rounded-lg p-6 mb-6">
                      <p className="text-gray-700 text-lg">
                        Your responses have been recorded and submitted to your
                        instructor.
                      </p>
                    </div>
                    <p className="text-sm text-gray-500">
                      Results will be shared by your instructor.
                    </p>
                  </div>
                </div>

                <div className="text-center mt-6">
                  <p className="text-sm text-gray-400">©Team Benny</p>
                </div>
              </div>
            </div>
          );
        }

        const question = questions[currentQuestion];
        const progress = ((currentQuestion + 1) / questions.length) * 100;

        const handleNext = () => {
          if (currentQuestion < questions.length - 1) {
            setCurrentQuestion((prev) => prev + 1);
            setQuestionTimeLeft(TIME_PER_QUESTION);
          } else {
            handleSubmitQuiz();
          }
        };

        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
            <div className="max-w-3xl mx-auto">
              <div className="bg-white rounded-lg shadow-md p-4 mb-4">
                <div className="flex justify-between items-center mb-2">
                  <div className="flex items-center space-x-4">
                    <span className="text-sm font-semibold text-gray-700">
                      {studentName} ({indexNumber})
                    </span>
                  </div>
                  <div className="flex items-center space-x-3">
                    {tabSwitches > 0 && (
                      <span className="text-sm text-red-600 font-semibold">
                        ⚠️ Switches: {tabSwitches} (-
                        {(tabSwitches * TAB_SWITCH_PENALTY).toFixed(1)})
                      </span>
                    )}
                    <div className="flex items-center space-x-2">
                      <Timer
                        className={`h-5 w-5 ${
                          questionTimeLeft <= 5 ? "text-red-600" : "text-indigo-600"
                        }`}
                      />
                      <span
                        className={`font-mono font-bold text-xl ${
                          questionTimeLeft <= 5
                            ? "text-red-600 animate-pulse"
                            : "text-gray-700"
                        }`}
                      >
                        {questionTimeLeft}s
                      </span>
                    </div>
                  </div>
                </div>

                <div className="flex justify-between text-sm text-gray-600 mb-2">
                  <span>
                    Question {currentQuestion + 1} of {questions.length}
                  </span>
                </div>

                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div
                    className="bg-indigo-600 h-2 rounded-full transition-all duration-300"
                    style={{ width: `${progress}%` }}
                  />
                </div>
              </div>

              <div className="bg-white rounded-lg shadow-md p-8">
                <h2 className="text-lg font-bold text-gray-800 mb-6 leading-relaxed">
                  {question.question}
                </h2>

                <div className="space-y-3">
                  {question.options.map((option, idx) => (
                    <label
                      key={idx}
                      className="flex items-start p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-indigo-400 hover:bg-indigo-50 transition duration-200"
                    >
                      <input
                        type="radio"
                        name={`question-${question.id}`}
                        value={option}
                        checked={answers[question.id] === option}
                        onChange={(e) =>
                          handleAnswerChange(question.id, e.target.value)
                        }
                        className="mt-1 mr-3 h-4 w-4 text-indigo-600 flex-shrink-0"
                      />
                      <span className="text-gray-700">{option}</span>
                    </label>
                  ))}
                </div>

                <div className="flex justify-end mt-8">
                  <button
                    onClick={handleNext}
                    className={`px-8 py-3 rounded-lg font-semibold ${
                      currentQuestion === questions.length - 1
                        ? "bg-green-600 hover:bg-green-700"
                        : "bg-indigo-600 hover:bg-indigo-700"
                    } text-white`}
                  >
                    {currentQuestion === questions.length - 1
                      ? "Submit Quiz"
                      : "Next Question"}
                  </button>
                </div>
              </div>

              <div className="text-center mt-6">
                <p className="text-sm text-gray-400">©Team Benny</p>
              </div>
            </div>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<QuizApp />);
    </script>
  </body>

</html>
